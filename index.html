<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora Cient√≠fica</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/mathjs@11.6.0/lib/browser/math.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>
<body>
  <button id="guiaBtn">üìò Gu√≠a</button>

  <div id="guiaContainer" class="oculto">
    <h2>Instrucciones de Uso</h2>
    <ul>
      <li>Presiona los botones para armar tu expresi√≥n matem√°tica.</li>
      <li><strong>Rad/Deg</strong>: Cambia entre radianes y grados.</li>
      <li><strong>Inv</strong>: Alterna funciones trigonom√©tricas inversas.</li>
      <li><strong>Hyp</strong>: Activa funciones hiperb√≥licas.</li>
      <li><strong>œÄ, e</strong>: Constantes matem√°ticas.</li>
      <li><strong>x!</strong>: Factorial del n√∫mero.</li>
      <li><strong>%</strong>: Calcula porcentaje.</li>
      <li><strong>‚àö</strong>: Ra√≠z cuadrada.</li>
      <li><strong>x<sup>y</sup></strong>: Potencia.</li>
      <li><strong>Ans</strong>: Reutiliza el resultado anterior.</li>
      <li><strong>‚à´</strong>: Men√∫ para calcular integrales definidas e indefinidas.</li>
      <li><strong>‚àÇ</strong>: Men√∫ para calcular derivadas.</li>
      <li><strong>Rnd</strong>: Inserta un n√∫mero aleatorio.</li>
      <li><strong>Gr√°fico</strong>: Dibuja la gr√°fica de la funci√≥n (requiere usar "x").</li>
      <li><strong>‚å´</strong>: Borrar un car√°cter. Si mantienes presionado, borra todo.</li>
      <li><strong>AC</strong>: Limpia toda la pantalla.</li>
    </ul>
    <button id="cerrarGuiaBtn" onclick="cerrarGuia()">Cerrar</button>
  </div>

  <!-- Calculadora -->
  <div class="calculadora">
    <!-- Pantalla y modo -->
    <div class="pantalla-container">
      <div class="modo-display">
        <span id="modo-indicador">Rad</span>
      </div>
      <input type="text" id="pantalla" readonly />
    </div>

    <div class="botones">
      <!-- Fila 1 -->
      <div class="fila">
        <button onclick="cambiarModo()">Rad/Deg</button>
        <button onclick="agregar('œÄ')">œÄ</button>
        <button onclick="agregar('e')">e</button>
        <button onclick="agregar('(')">(</button>
        <button onclick="agregar(')')">)</button>
      </div>
    
      <!-- Fila 2 -->
      <div class="fila">
        <button id="btn-inv" class="funcion">Inv</button>
        <button id="btn-sin" onclick="insertarFuncionTrig('sin')">sin</button>
        <button id="btn-cos" onclick="insertarFuncionTrig('cos')">cos</button>
        <button id="btn-tan" onclick="insertarFuncionTrig('tan')">tan</button>
        <button id="btn-borrar">‚å´</button>
      </div>
    
      <!-- Fila 3 -->
      <div class="fila">
        <button id="btn-hyp" class="funcion">Hyp</button>
        <button id="btn-ln" onclick="agregar('ln(')">ln</button>
        <button id="btn-exp" onclick="agregar('exp(')">exp</button>
        <button onclick="agregar('log10(')">log‚ÇÅ‚ÇÄ</button>
        <button onclick="agregar('log2(')">log‚ÇÇ</button>
      </div>
    <!-- Fila 4 -->
      <div class="fila">
        <button onclick="agregar('‚àö(')">‚àö</button>
        <button onclick="mostrarMenuIntegrales()">‚à´</button>
        <button onclick="mostrarMenuDerivada()">‚àÇ</button>
        <button onclick="agregar('^')">x<sup>y</sup></button>
        <button onclick="agregar('x')">x</button>
      </div>
    
      <!-- Fila 5 -->
      <div class="fila">
        <button onclick="agregar('!')">x!</button>
        <button onclick="generarRandom()">Rnd</button>
        <button onclick="usarUltimoResultado()">Ans</button>
        <button onclick="agregar('%')">%</button>
        <button onclick="graficar()" class="boton-grafico">Gr√°fico</button>
        
      </div>
    
      <!-- Fila 6 -->
<div class="fila">
  <button onclick="agregar('7')">7</button>
  <button onclick="agregar('8')">8</button>
  <button onclick="agregar('9')">9</button>
  <button onclick="agregar('/')">√∑</button>
  <button onclick="agregar('*')">√ó</button>
</div>

    
      <!-- Fila 7 -->
<div class="fila">
  <button onclick="agregar('4')">4</button>
  <button onclick="agregar('5')">5</button>
  <button onclick="agregar('6')">6</button>
  <button onclick="agregar('-')">‚àí</button>
  <button onclick="agregar('+')">+</button>
</div>

    
      <!-- Fila 8 -->
<div class="fila">
  <button onclick="agregar('1')">1</button>
  <button onclick="agregar('2')">2</button>
  <button onclick="agregar('3')">3</button>
  <button onclick="agregar('.')">.</button>
  <button onclick="agregar('0')">0</button>
</div>

<!-- Fila 9 -->
<div class="fila">
  <button onclick="calcular()">=</button>
  <button onclick="limpiarGrafico()" class="boton-ocultar">Ocultar</button>
</div>


  
      <div class="fila">
      </div>
    </div>
  
   

  <!-- Men√∫ de derivadas -->
  <div id="menu-derivadas" class="oculto">
    <h3>Derivada</h3>
    <label>
      Funci√≥n: <input type="text" id="inputFuncionDerivada" placeholder="Ej: x^2 + sin(x)" />
    </label><br />
    <label>
      Variable: <input type="text" id="inputVariableDerivada" value="x" />
    </label><br />
    <button onclick="calcularDerivada()">Calcular</button>
    <button onclick="cerrarMenuDerivadas()">Cancelar</button>
  </div>

  <!-- Men√∫ de integrales -->
  <div id="menu-integrales" class="oculto">
    <h3>Seleccione tipo de integral</h3>
    <button onclick="mostrarIntegralDefinida()">Definida ‚à´f(x)dx</button>
    <button onclick="mostrarIntegralIndefinida()">Indefinida ‚à´f(x)</button>
    <button onclick="cerrarMenuIntegrales()">Cancelar</button>
  </div>

  <!-- Scripts -->
  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const guiaBtn = document.getElementById("guiaBtn");
      const guiaContainer = document.getElementById("guiaContainer");
      const cerrarGuiaBtn = document.getElementById("cerrarGuiaBtn");

      // Mostrar/ocultar la gu√≠a al presionar el bot√≥n Gu√≠a
      guiaBtn.addEventListener("click", () => {
        guiaContainer.classList.toggle("oculto");
      });

      // Cerrar la gu√≠a al presionar el bot√≥n Cerrar dentro de la gu√≠a
      cerrarGuiaBtn.addEventListener("click", () => {
        guiaContainer.classList.add("oculto");
      });

      let invActiva = false,
          hypActiva = false;

      document.getElementById("btn-inv").addEventListener("click", () => {
        invActiva = !invActiva;
        actualizarFunciones();
      });

      document.getElementById("btn-hyp").addEventListener("click", () => {
        hypActiva = !hypActiva;
        actualizarFunciones();
      });

      function actualizarFunciones() {
        const funciones = {
          "btn-sin": ["sin", "asin", "sinh", "asinh"],
          "btn-cos": ["cos", "acos", "cosh", "acosh"],
          "btn-tan": ["tan", "atan", "tanh", "atanh"],
          "btn-ln":  ["ln",  "exp",  "ln",   "exp"],
        };

        for (let id in funciones) {
          const btn = document.getElementById(id);
          const [normal, inv, hyp, hypInv] = funciones[id];
          let texto = invActiva && hypActiva ? hypInv : hypActiva ? hyp : invActiva ? inv : normal;
          btn.textContent = texto;
          btn.setAttribute("onclick", `insertarFuncionTrig('${texto}')`);
        }
      }
    });
  </script>
  <div id="grafico-container" class="oculto"></div>
</body>
</html>
